/* МИГАНИЕ ПОДЗАГОЛОВКА */
/* Без изменений, работает отлично */
.blink {
    animation: blinker 2s linear infinite;
}

@keyframes blinker {
    50% { opacity: 0.3; }
}

/* ГЛИТЧ ЭФФЕКТ ДЛЯ ТЕКСТА */
.glitch-text {
    position: relative;
    /* Убеждаемся, что элементы не выходят за рамки при смещении */
    display: inline-block;
}

/* Создаем две копии текста для смещения */
.glitch-text::before,
.glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-color); /* Перекрывает основной текст */
    overflow: hidden;
}

.glitch-text::before {
    /* Сдвиг в em (относительно размера шрифта), а не в px */
    left: 0.05em;
    text-shadow: -0.05em 0 #00ffff;
    /* Начальное состояние clip-path */
    clip-path: inset(50% 0 30% 0);
    animation: glitch-anim-responsive 5s infinite linear alternate-reverse;
}

.glitch-text::after {
    left: -0.05em;
    text-shadow: -0.05em 0 var(--primary-red);
    clip-path: inset(10% 0 60% 0);
    animation: glitch-anim-responsive 5s infinite linear alternate-reverse;
    animation-delay: 2s; /* Рассинхрон */
}

/* АДАПТИВНАЯ АНИМАЦИЯ ГЛИТЧА
   Используем clip-path: inset(top right bottom left)
   Значения в процентах (%) гарантируют, что глюк будет
   на тексте любого размера.
*/
@keyframes glitch-anim-responsive {
    0% { clip-path: inset(40% 0 61% 0); transform: skew(0.5deg); }
    5% { clip-path: inset(9% 0 54% 0); transform: skew(0.5deg); }
    10% { clip-path: inset(89% 0 3% 0); transform: skew(0deg); }
    15% { clip-path: inset(12% 0 8% 0); transform: skew(0deg); }
    20% { clip-path: inset(53% 0 45% 0); transform: skew(0deg); }
    25% { clip-path: inset(23% 0 34% 0); transform: skew(0.5deg); }
    30% { clip-path: inset(86% 0 7% 0); transform: skew(0deg); }
    35% { clip-path: inset(5% 0 88% 0); transform: skew(0deg); }
    40% { clip-path: inset(36% 0 11% 0); transform: skew(0deg); }
    45% { clip-path: inset(25% 0 66% 0); transform: skew(0deg); }
    50% { clip-path: inset(67% 0 12% 0); transform: skew(0deg); }
    55% { clip-path: inset(4% 0 92% 0); transform: skew(0.5deg); }
    60% { clip-path: inset(92% 0 2% 0); transform: skew(0deg); }
    65% { clip-path: inset(44% 0 17% 0); transform: skew(0deg); }
    70% { clip-path: inset(18% 0 39% 0); transform: skew(0deg); }
    75% { clip-path: inset(75% 0 22% 0); transform: skew(0deg); }
    80% { clip-path: inset(23% 0 65% 0); transform: skew(0deg); }
    85% { clip-path: inset(84% 0 14% 0); transform: skew(0deg); }
    90% { clip-path: inset(45% 0 47% 0); transform: skew(0deg); }
    95% { clip-path: inset(37% 0 20% 0); transform: skew(0deg); }
    100% { clip-path: inset(4% 0 91% 0); transform: skew(0deg); }
}

/* АНИМАЦИЯ ПЕРЕХОДА (Рассеивание) */
.dissolve-out {
    animation: disperse 1.2s forwards ease-in;
    pointer-events: none;
}

@keyframes disperse {
    0% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0px);
        letter-spacing: normal;
    }
    100% {
        opacity: 0;
        transform: scale(1.5);
        filter: blur(10px); /* Чуть меньше блюра для мобильных (производительность) */
        /* em позволяет разлету зависеть от размера букв, а не ширины экрана */
        letter-spacing: 0.5em;
    }
}

.fade-in {
    animation: appear 1.5s forwards ease-out;
}

@keyframes appear {
    /* rem - безопасная единица измерения для отступов */
    0% { opacity: 0; transform: translateY(2rem); }
    100% { opacity: 1; transform: translateY(0); }
}
